{"ast":null,"code":"import { WebPlugin } from '@capacitor/core';\nexport class AudioPluginWeb extends WebPlugin {\n  constructor() {\n    super({\n      name: 'Audio',\n      platforms: ['web']\n    });\n    this.current = null;\n    this.currentIndex = 0;\n  }\n  playList(items) {\n    this.audios = items.map((v, _) => {\n      let audio = new Audio();\n      audio.src = v.src;\n      audio.load();\n      return audio;\n    });\n    this.current = this.audios[0];\n    this.currentIndex = 0;\n    this.play();\n  }\n  triggerEvent(name) {\n    var event; // The custom event that will be created\n    if (document.createEvent) {\n      event = document.createEvent(\"HTMLEvents\");\n      event.initEvent(name, true, true);\n      // event.eventName = name;\n      window.dispatchEvent(event);\n    }\n  }\n  play() {\n    this.current.onended = _ => {\n      this.triggerEvent('playEnd');\n      if (this.current === this.audios[this.audios.length - 1]) {\n        this.triggerEvent('playAllEnd');\n      } else {\n        this.currentIndex += 1;\n        this.current = this.audios[this.currentIndex];\n        this.play();\n      }\n    };\n    this.current.onpause = _ => {\n      this.triggerEvent('playPaused');\n    };\n    this.current.onplaying = _ => {\n      this.triggerEvent('playResumed');\n    };\n    this.current && this.current.play();\n  }\n  pausePlay() {\n    this.current && this.current.pause();\n  }\n  resumePlay() {\n    this.play();\n  }\n  setPlaying(info) {\n    this.info = info;\n    return new Promise(r => r());\n  }\n}\nconst AudioPlugin = new AudioPluginWeb();\nexport { AudioPlugin };\nimport { registerWebPlugin } from '@capacitor/core';\nregisterWebPlugin(AudioPlugin);","map":{"version":3,"names":["WebPlugin","AudioPluginWeb","constructor","name","platforms","current","currentIndex","playList","items","audios","map","v","_","audio","Audio","src","load","play","triggerEvent","event","document","createEvent","initEvent","window","dispatchEvent","onended","length","onpause","onplaying","pausePlay","pause","resumePlay","setPlaying","info","Promise","r","AudioPlugin","registerWebPlugin"],"sources":["../../src/web.ts"],"sourcesContent":[null],"mappings":"AAAA,SAASA,SAAS,QAAQ,iBAAiB;AAG3C,OAAM,MAAOC,cAAe,SAAQD,SAAS;EAC3CE,YAAA;IACE,KAAK,CAAC;MACJC,IAAI,EAAE,OAAO;MACbC,SAAS,EAAE,CAAC,KAAK;KAClB,CAAC;IAGJ,KAAAC,OAAO,GAAQ,IAAI;IACnB,KAAAC,YAAY,GAAG,CAAC;EAHhB;EAMAC,QAAQA,CAACC,KAAe;IACpB,IAAI,CAACC,MAAM,GAAGD,KAAK,CAACE,GAAG,CAAC,CAACC,CAAgB,EAAEC,CAAC,KAAI;MAC5C,IAAIC,KAAK,GAAG,IAAIC,KAAK,EAAE;MACvBD,KAAK,CAACE,GAAG,GAAGJ,CAAC,CAACI,GAAG;MACjBF,KAAK,CAACG,IAAI,EAAE;MACZ,OAAOH,KAAK;IAChB,CAAC,CAAC;IACF,IAAI,CAACR,OAAO,GAAG,IAAI,CAACI,MAAM,CAAC,CAAC,CAAC;IAC7B,IAAI,CAACH,YAAY,GAAG,CAAC;IACrB,IAAI,CAACW,IAAI,EAAE;EACf;EACAC,YAAYA,CAACf,IAAY;IACrB,IAAIgB,KAAK,CAAC,CAAC;IACX,IAAGC,QAAQ,CAACC,WAAW,EAAC;MACpBF,KAAK,GAAGC,QAAQ,CAACC,WAAW,CAAC,YAAY,CAAC;MAC1CF,KAAK,CAACG,SAAS,CAACnB,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC;MACjC;MACAoB,MAAM,CAACC,aAAa,CAACL,KAAK,CAAC;;EAEnC;EACAF,IAAIA,CAAA;IACA,IAAI,CAACZ,OAAO,CAACoB,OAAO,GAAIb,CAAO,IAAI;MAC/B,IAAI,CAACM,YAAY,CAAC,SAAS,CAAC;MAC5B,IAAI,IAAI,CAACb,OAAO,KAAK,IAAI,CAACI,MAAM,CAAC,IAAI,CAACA,MAAM,CAACiB,MAAM,GAAG,CAAC,CAAC,EAAE;QACtD,IAAI,CAACR,YAAY,CAAC,YAAY,CAAC;OAClC,MAAM;QACH,IAAI,CAACZ,YAAY,IAAI,CAAC;QACtB,IAAI,CAACD,OAAO,GAAG,IAAI,CAACI,MAAM,CAAC,IAAI,CAACH,YAAY,CAAC;QAC7C,IAAI,CAACW,IAAI,EAAE;;IAEnB,CAAC;IACD,IAAI,CAACZ,OAAO,CAACsB,OAAO,GAAIf,CAAO,IAAI;MAC/B,IAAI,CAACM,YAAY,CAAC,YAAY,CAAC;IACnC,CAAC;IACD,IAAI,CAACb,OAAO,CAACuB,SAAS,GAAIhB,CAAO,IAAI;MACjC,IAAI,CAACM,YAAY,CAAC,aAAa,CAAC;IACpC,CAAC;IACD,IAAI,CAACb,OAAO,IAAI,IAAI,CAACA,OAAO,CAACY,IAAI,EAAE;EACvC;EACAY,SAASA,CAAA;IACL,IAAI,CAACxB,OAAO,IAAI,IAAI,CAACA,OAAO,CAACyB,KAAK,EAAE;EACxC;EACAC,UAAUA,CAAA;IACN,IAAI,CAACd,IAAI,EAAE;EACf;EACAe,UAAUA,CAACC,IAAY;IACnB,IAAI,CAACA,IAAI,GAAGA,IAAI;IAChB,OAAO,IAAIC,OAAO,CAACC,CAAC,IAAIA,CAAC,EAAE,CAAE;EACjC;;AAGF,MAAMC,WAAW,GAAG,IAAInC,cAAc,EAAE;AAExC,SAASmC,WAAW;AAEpB,SAASC,iBAAiB,QAAQ,iBAAiB;AACnDA,iBAAiB,CAACD,WAAW,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}